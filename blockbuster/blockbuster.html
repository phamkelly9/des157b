<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>swish swish fish</title>
    <link rel="stylesheet" href="blockbuster.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@1&family=Libre+Baskerville&display=swap" rel="stylesheet">

<!-- Source for audio: Ocean Diving - Underwater Chill Music by JuliusH-->


</head>

<body>
    <video id="myVideo" muted loop autoplay playsinline>

        <source src="images/fish.mp4" type="video/mp4">
        <source src="images/fish.webm" type="video/webm">

        <p>Your browser doesn't support HTML5 video. Here is a <a href="images/fish.mp4">link to the video</a>
            instead.</p>
    </video>
    <audio autoplay controls muted>
        <source src="images/fish.ogg" type="audio/ogg">
        <source src="images/fish.mp3" type="audio/mpeg">
      <p>Your browser does not support the audio element. Here is a <a href="images/fish.mp3">link to the audio</a>
      instead. </p>
      </audio>
    <i class="fa-solid fa-fish"></i>
    <i class="fa-solid fa-radio"></i>

    <section id="quote">
        <p id="line1" class="hidden">It's okay to eat fish</p>
        <p id="line2" class="hidden">because they don't have any feelings</p>
        <p id="line3" class="hidden">- Kurt Cobain</p>
    </section>

    <script>
        (function() {
            'use strict';
            console.log('reading');
            const myVideo = document.querySelector('#myVideo');
            const loading = document.querySelector('.fa-fish');
            const radio = document.querySelector('.fa-radio');
            const line1 = document.querySelector('#line1');
            const line2 = document.querySelector('#line2');
            const line3 = document.querySelector('#line3');
            const vid = document.querySelector('#myVideo')

            const quote = {
                start: [0, 5, 8],
                stop: [4, 7, 10],
                line: [line1, line2, line3]
            }

            const intervalID = setInterval(checkTime, 1000);

            function checkTime() {
                for (let i = 0; i < quote.start.length; i++) {
                    if (quote.start[i] < myVideo.currentTime && myVideo.currentTime < quote.stop[i]) {
                        quote.line[i].className = "showing";
                    } else {
                        quote.line[i].className = "hidden";
                    }
                }
            }

            myVideo.addEventListener('playing', function() {
                loading.style.display = 'none';
            })

            const hueanimation = (e) => {
                let deg = (e.clientX * 360) / window.innerWidth;
                vid.style.filter = `hue-rotate(${deg}deg)`;
            }

            document.addEventListener('mousemove', hueAnimation)


            radio.addEventListener('click', function() {
                if (audio.paused == false) {
                    audio.play();
                } else {
                    audio.pause();
                }
            });
            
        })();
    </script>
</body>

</html>